<html>
  <head>
    <title>Discovery Page - RCloud</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.png" />
    <link rel="stylesheet" type="text/css" href="/css/rcloud.css" />
    <link rel="stylesheet" type="text/css" href="/css/rcloud-discover.css" />
    <script src="/lib/js/require-common.js"></script>
    <script type="text/javascript" data-main="/lib/js/require-discover.js" src="/lib/js/require.js"></script>
  </head>
  <body>

    <div class="navbar navbar-inverse ">
      <div>
        <div id="rcloud-navbar-header" class="navbar-header"></div>
      </div>
    </div>

    <!-- progress bar -->
    <div id="progress">
      <img src="img/logo_rcloud.png" />
      <progress value="0" max="20"></progress>
    </div>

    <div class="container" id="main-div">
      <div id='discovery-app'>
        <div style='position:relative'>
          <div class="row" style="margin-bottom: 10px;">
            <div class="btn-group pull-right" data-toggle="buttons">
              <label class="btn btn-primary active">
                <input type="radio" name="metric" value="recently.modified" autocomplete="off" checked>Recent
              </label>
              <label class="btn btn-primary">
                <input type="radio" name="metric" value="most.popular" autocomplete="off">Popular
              </label>
            </div>
          </div>
          <div class="row">
            <div class="grid"></div>
          </div>
        </div>
      </div>
    </div>

    <script type="text/template" id="item_template">
      <% _.each(notebooks, function(notebook) { %>
      <div class="grid-item">
        <a href="edit.html?notebook=<%=notebook.id%>">

          <div class="row" style="position:relative">
            <div class='header col-sm-10'>
              <h1><%=notebook.description%></h1>
              <h2><%=notebook.last_commit%> by <%=notebook.username%> </h2>
            </div>
            <div class="star-holder">
              <button id="star-notebook" title="Add to Interests" type="button" class="btn btn-link navbar-btn" style="padding-left: 3px">
                <i class="icon-star"></i><sub><span id="curr-star-count"><%=discover.num_stars(notebook.id)%></span></sub>
              </button>
            </div>
            <div class="fork-holder">
              <button id="fork-notebook" title="Fork" type="button" class="btn btn-link navbar-btn" style="padding-left: 3px">
                <i class="icon-code-fork"></i><sub><span id="curr-fork-count"><%=discover.fork_count(notebook.id)%></span></sub>
              </button>
            </div>
          </div>
          <div class="row">
            <div class="image-holder col-sm-12">
              <img src="<%=notebook.image_src%>" onError="this.onerror=null;this.src='./img/missing.png';" class="img-responsive" alt="Responsive image">
            </div>
          </div>
        </a>
      </div>
      <% }); %>
    </script>

    <script type="text/javascript" src="/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript">MathJax && MathJax.Hub.Config({tex2jax: {processEscapes: true,
      processEnvironments: false, inlineMath: [ ['\\(','\\)'] ],
      displayMath: [ ['\\[','\\]'] ] },
      "HTML-CSS": { minScaleAdjust: 125 } });
    </script>

  </body>
</html>
